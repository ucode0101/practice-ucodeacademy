<div class="container">
  <div class="row">
    <div id="flash-messages" class="large-12 columns">
    </div>
  </div>
  <div class="row">
    <div id="content" class="large-12 columns">
      <div class="container">
        <div class="col-sm-1-12">
          <div id="alert" class="alert alert-primary">
            <p><strong id="msg">Check the new tab in 3 seconds!</strong></p>
          </div>
        </div>
      </div>
      <script>
          setTimeout(function openNewTab() {
              var win = window.open("/new_tab", '_blank');
              document.getElementById("alert").remove();
              document.getElementById("msg").innerText = "A new tab opened";

              // Check if the new tab is successfully opened
              if (win) {
                  win.onload = function() {
                      // Send a message to the new tab
                      win.postMessage("Hello from the original tab!", window.location.origin);
                  };
              } else {
                  // Handle cases where the new tab couldn't be opened
                  console.error("Failed to open new tab");
              }
          }, 3000);

          // Listen for messages from the new tab
          window.addEventListener("message", function(event) {
              if (event.origin !== window.location.origin) return; // Security check
              console.log("Message received from new tab:", event.data);
          });
      </script>
    </div>
  </div>
</div>





<!--<div class="container">-->
<!--  <div class="row">-->
<!--    <div id="flash-messages" class="large-12 columns">-->
<!--    </div>-->
<!--  </div>-->
<!--  <div class="row">-->
<!--    <div id="content" class="large-12 columns">-->
<!--      <div class="container">-->
<!--        <div class="col-sm-1-12">-->
<!--          <div id="alert" class="alert alert-primary">-->
<!--            <p><strong id="msg">Check the new tab!</strong></p>-->

<!--          </div>-->
<!--        </div>-->
<!--      </div>-->
<!--      <script>-->
<!--          document.title = "New tab will be opened in 3 seconds!";-->
<!--          window.onload = setTimeout(function openNewTab() {-->
<!--              var win = window.open("/new_tab", '_blank');-->
<!--              win.focus();-->
<!--              document.getElementById("spinner").remove();-->
<!--              document.getElementById("msg").innerText = "Check the new tab!"-->
<!--          }, 3000);-->
<!--      </script>-->

<!--    </div>-->
<!--  </div>-->
<!--  <div id="page-footer" class="row">-->
<!--    <div class="large-4 large-centered columns">-->
<!--      <hr>-->
<!--      <div style="text-align: center;">Powered by <a target="_blank" href="https://cydeo.com/">CYDEO</a></div>-->
<!--    </div>-->
<!--  </div>-->
<!--</div>-->